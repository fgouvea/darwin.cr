<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 1.6.2">
<meta name="crystal_docs.project_version" content="main-dev">
<meta name="crystal_docs.project_name" content="darwin">



<link href="css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/doc.js"></script>

  <meta name="repository-name" content="darwin">
  <title>darwin main-dev</title>
  <script type="text/javascript">
  CrystalDocs.base_path = "";
  </script>
</head>
<body>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>
<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="project-summary">
      <h1 class="project-name">
        <a href="index.html">
          darwin
        </a>
      </h1>

      <span class="project-version">
        main-dev
      </span>
    </div>
  </div>

  <div class="search-results hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class="parent " data-id="darwin/Darwin" data-name="darwin">
      <a href="Darwin.html">Darwin</a>
      
        <ul>
  
  <li class="parent " data-id="darwin/Darwin/Alphabet" data-name="darwin::alphabet">
      <a href="Darwin/Alphabet.html">Alphabet</a>
      
        <ul>
  
  <li class=" " data-id="darwin/Darwin/Alphabet/Alphabet" data-name="darwin::alphabet::alphabet(t)">
      <a href="Darwin/Alphabet/Alphabet.html">Alphabet</a>
      
    </li>
  
  <li class=" " data-id="darwin/Darwin/Alphabet/ArrayAlphabet" data-name="darwin::alphabet::arrayalphabet(t)">
      <a href="Darwin/Alphabet/ArrayAlphabet.html">ArrayAlphabet</a>
      
    </li>
  
  <li class=" " data-id="darwin/Darwin/Alphabet/IntAlphabet" data-name="darwin::alphabet::intalphabet">
      <a href="Darwin/Alphabet/IntAlphabet.html">IntAlphabet</a>
      
    </li>
  
  <li class=" " data-id="darwin/Darwin/Alphabet/StringAlphabet" data-name="darwin::alphabet::stringalphabet">
      <a href="Darwin/Alphabet/StringAlphabet.html">StringAlphabet</a>
      
    </li>
  
  <li class=" " data-id="darwin/Darwin/Alphabet/StubAlphabet" data-name="darwin::alphabet::stubalphabet(t)">
      <a href="Darwin/Alphabet/StubAlphabet.html">StubAlphabet</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="darwin/Darwin/Config" data-name="darwin::config(t)">
      <a href="Darwin/Config.html">Config</a>
      
    </li>
  
  <li class="parent " data-id="darwin/Darwin/Crossover" data-name="darwin::crossover">
      <a href="Darwin/Crossover.html">Crossover</a>
      
        <ul>
  
  <li class=" " data-id="darwin/Darwin/Crossover/CrossoverOperator" data-name="darwin::crossover::crossoveroperator(t)">
      <a href="Darwin/Crossover/CrossoverOperator.html">CrossoverOperator</a>
      
    </li>
  
  <li class=" " data-id="darwin/Darwin/Crossover/PointCrossover" data-name="darwin::crossover::pointcrossover(t)">
      <a href="Darwin/Crossover/PointCrossover.html">PointCrossover</a>
      
    </li>
  
  <li class=" " data-id="darwin/Darwin/Crossover/StubCrossover" data-name="darwin::crossover::stubcrossover(t)">
      <a href="Darwin/Crossover/StubCrossover.html">StubCrossover</a>
      
    </li>
  
  <li class=" " data-id="darwin/Darwin/Crossover/UniformCrossover" data-name="darwin::crossover::uniformcrossover(t)">
      <a href="Darwin/Crossover/UniformCrossover.html">UniformCrossover</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="darwin/Darwin/Engine" data-name="darwin::engine(t)">
      <a href="Darwin/Engine.html">Engine</a>
      
    </li>
  
  <li class="parent " data-id="darwin/Darwin/Evaluation" data-name="darwin::evaluation">
      <a href="Darwin/Evaluation.html">Evaluation</a>
      
        <ul>
  
  <li class=" " data-id="darwin/Darwin/Evaluation/Evaluator" data-name="darwin::evaluation::evaluator(t)">
      <a href="Darwin/Evaluation/Evaluator.html">Evaluator</a>
      
    </li>
  
  <li class=" " data-id="darwin/Darwin/Evaluation/StubEvaluator" data-name="darwin::evaluation::stubevaluator(t)">
      <a href="Darwin/Evaluation/StubEvaluator.html">StubEvaluator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="darwin/Darwin/Evaluator" data-name="darwin::evaluator">
      <a href="Darwin/Evaluator.html">Evaluator</a>
      
    </li>
  
  <li class=" " data-id="darwin/Darwin/Genome" data-name="darwin::genome(t)">
      <a href="Darwin/Genome.html">Genome</a>
      
    </li>
  
  <li class=" " data-id="darwin/Darwin/GenomeFactory" data-name="darwin::genomefactory(t)">
      <a href="Darwin/GenomeFactory.html">GenomeFactory</a>
      
    </li>
  
  <li class="parent " data-id="darwin/Darwin/Mutation" data-name="darwin::mutation">
      <a href="Darwin/Mutation.html">Mutation</a>
      
        <ul>
  
  <li class=" " data-id="darwin/Darwin/Mutation/MutationOperator" data-name="darwin::mutation::mutationoperator(t)">
      <a href="Darwin/Mutation/MutationOperator.html">MutationOperator</a>
      
    </li>
  
  <li class=" " data-id="darwin/Darwin/Mutation/SimpleMutator" data-name="darwin::mutation::simplemutator(t)">
      <a href="Darwin/Mutation/SimpleMutator.html">SimpleMutator</a>
      
    </li>
  
  <li class=" " data-id="darwin/Darwin/Mutation/StubMutator" data-name="darwin::mutation::stubmutator(t)">
      <a href="Darwin/Mutation/StubMutator.html">StubMutator</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="darwin/Darwin/Post" data-name="darwin::post">
      <a href="Darwin/Post.html">Post</a>
      
        <ul>
  
  <li class=" " data-id="darwin/Darwin/Post/PostProcessor" data-name="darwin::post::postprocessor(t)">
      <a href="Darwin/Post/PostProcessor.html">PostProcessor</a>
      
    </li>
  
  <li class=" " data-id="darwin/Darwin/Post/StubProcessor" data-name="darwin::post::stubprocessor(t)">
      <a href="Darwin/Post/StubProcessor.html">StubProcessor</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="darwin/Darwin/PostProcessor" data-name="darwin::postprocessor">
      <a href="Darwin/PostProcessor.html">PostProcessor</a>
      
    </li>
  
  <li class="parent " data-id="darwin/Darwin/Selection" data-name="darwin::selection">
      <a href="Darwin/Selection.html">Selection</a>
      
        <ul>
  
  <li class=" " data-id="darwin/Darwin/Selection/FitnessSelector" data-name="darwin::selection::fitnessselector(t)">
      <a href="Darwin/Selection/FitnessSelector.html">FitnessSelector</a>
      
    </li>
  
  <li class=" " data-id="darwin/Darwin/Selection/SelectionOperator" data-name="darwin::selection::selectionoperator(t)">
      <a href="Darwin/Selection/SelectionOperator.html">SelectionOperator</a>
      
    </li>
  
  <li class=" " data-id="darwin/Darwin/Selection/StubSelector" data-name="darwin::selection::stubselector(t)">
      <a href="Darwin/Selection/StubSelector.html">StubSelector</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1><a id="darwin.cr" class="anchor" href="#darwin.cr">  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Darwin.cr</h1>
<p>A genetic algorithm Crystal library that aims to be simple, but highly customizable.</p>
<h2><a id="installation" class="anchor" href="#installation">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Installation</h2>
<ol>
<li>
<p>Add the dependency to your <code>shard.yml</code>:</p>
<pre><code class="language-yaml">dependencies:
  darwin:
    github: fgouvea/darwin.cr</code></pre>
</li>
<li>
<p>Run <code>shards install</code></p>
</li>
</ol>
<h2><a id="usage" class="anchor" href="#usage">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Usage</h2>
<pre><code class="language-crystal"><span class="k">require</span> <span class="s">&quot;darwin&quot;</span>

<span class="c"># This will evaluate the fitness of each genome</span>
<span class="k">class</span> <span class="t">HelloWorldEvaluator</span> <span class="o">&lt;</span> <span class="t">Darwin</span><span class="t">::</span><span class="t">Evaluator</span>(<span class="t">Char</span>)
  <span class="k">def</span> <span class="m">evaluate</span>(genome : <span class="t">Array</span>(<span class="t">Char</span>)) : <span class="t">Float64</span>
    accuracy <span class="o">=</span> <span class="n">0.0</span>

    <span class="c"># Count how many characters in the genome match the string &quot;hello world!&quot;</span>
    (<span class="n">0</span>...genome.size).each <span class="k">do</span> <span class="o">|</span>i<span class="o">|</span>
      accuracy <span class="o">+=</span> <span class="n">1</span> <span class="k">if</span> genome[i] <span class="o">==</span> <span class="s">&quot;hello world!&quot;</span>.chars[i]
    <span class="k">end</span>

    accuracy
  <span class="k">end</span>
<span class="k">end</span>

config <span class="o">=</span> <span class="t">Darwin</span><span class="t">::</span><span class="t">Config</span>.new(
  alphabet: <span class="t">Darwin</span><span class="t">::</span><span class="t">Alphabet</span><span class="t">::</span><span class="t">StringAlphabet</span>.new(<span class="s">&quot;abcdefghijklmnopqrstuwvxyz?!,.; &quot;</span>),
  genome_length: <span class="n">12</span>,
  population_size: <span class="n">50</span>
) 

engine <span class="o">=</span> <span class="t">Darwin</span><span class="t">::</span><span class="t">Engine</span>.new(
  config: config,
  evaluation: <span class="t">HelloWorldEvaluator</span>.new)

engine.run(generations: <span class="n">100</span>)

engine.population[<span class="n">0</span>].dna <span class="c"># =&gt; The fittest individual after running</span></code></pre>
<p>To use <code>darwin.cr</code> to execute the genetic algorithm (GA) you will have to:</p>
<ul>
<li>Code a class that extends <code><a href="Darwin/Evaluator.html">Darwin::Evaluator</a></code> and implements <code>evaluate(Array(T)) : Float64</code> to evaluate the fitness of a genome.</li>
<li>Crate a <code><a href="Darwin/Config.html">Darwin::Config</a></code> object that defines:</li>
<li>
<ul>
<li><code>alphabet</code> - an instance of <code><a href="Darwin/Alphabet/Alphabet.html">Darwin::Alphabet::Alphabet</a>(T)</code>. You can one of the alphabets provided in this liberary such as <code>IntAlphabet</code>, <code>ArrayAlphabet</code> or <code>StringAlphabet</code> (see <em>Alphabet</em> section below) or implement your own.</li>
</ul>
</li>
<li>
<ul>
<li><code>genome_length</code> - how many genes are in each individual of the population.</li>
</ul>
</li>
<li>
<ul>
<li><code>population_size</code> - how many individuals are in the population in each generation.</li>
</ul>
</li>
<li>Crate a <code><a href="Darwin/Engine.html">Darwin::Engine</a></code> instance with the configuration and evaluator defined above</li>
</ul>
<p>The <code>engine</code> instance lets you run the GA. At the end of every generation the population will be sorted by fitness from highest to lowest, so the fittest individual can be accessed as <code>engine.population[0]</code>.</p>
<p>You may have noticed that most of the classes included in this library have a generic type parameter <code>T</code>. This refers to the type of a single gene in the algorithm. By making the classes generic for <code>T</code>, Darwin can run for arrays of any type you want.</p>
<p>There are more options provided in the <code>config</code> and <code>engine</code> objects, as well as various implementations of the operators used in the GA (crossover, mutation, selection), all of which will be discussed in the sections below.</p>
<p>Additionally, you can declare a <code><a href="Darwin/PostProcessor.html">Darwin::PostProcessor</a></code> that will run after each generation to examine or print the results, such as:</p>
<pre><code class="language-crystal"><span class="k">class</span> <span class="t">Printer</span> <span class="o">&lt;</span> <span class="t">Darwin</span><span class="t">::</span><span class="t">PostProcessor</span>(<span class="t">Char</span>)
  <span class="k">def</span> <span class="m">process</span>(engine : <span class="t">Darwin</span><span class="t">::</span><span class="t">Engine</span>(<span class="t">Char</span>))
    puts <span class="s">&quot;[</span><span class="i">#{</span>engine.generation<span class="i">}</span><span class="s"> </span><span class="i">#{</span>engine.population[<span class="n">0</span>].dna.join<span class="i">}</span><span class="s"> (fitness = </span><span class="i">#{</span>engine.population[<span class="n">0</span>].fitness<span class="i">}</span><span class="s">)]&quot;</span>
  <span class="k">end</span>
<span class="k">end</span>

engine <span class="o">=</span> <span class="t">Darwin</span><span class="t">::</span><span class="t">Engine</span>.new(..., post: <span class="t">Printer</span>.new)</code></pre>
<h3><a id="config" class="anchor" href="#config">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Config</h3>
<p>The <code><a href="Darwin/Config.html">Darwin::Config</a></code> class has the following properties:</p>
<ul>
<li><code>alphabet : <a href="Darwin/Alphabet/Alphabet.html">Darwin::Alphabet::Alphabet</a>(T)</code> - an instance of <code><a href="Darwin/Alphabet/Alphabet.html">Darwin::Alphabet::Alphabet</a>(T)</code>. You can one of the alphabets provided in this liberary such as <code>IntAlphabet</code>, <code>ArrayAlphabet</code> or <code>StringAlphabet</code> (see <em>Alphabet</em> section below) or implement your own.</li>
<li><code>genome_length : Int32</code> - how many genes are in each individual of the population.</li>
<li><code>population_size : Int32</code> - how many individuals are in the population in each generation.</li>
<li><code>elitism : Int32</code> - number of the fittest individuals that will be carried over unchanged to the next population in every generation. This can sometimes help avoid regressions and speed up the algorithm. <em>(Default = 0)</em></li>
</ul>
<p>This properties can be assigned as named paremters in the constructor or changed with the setters (e.g. <code>config.elitism = 2</code>) after the object has been initialized.</p>
<h3><a id="engine" class="anchor" href="#engine">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Engine</h3>
<p>The <code><a href="Darwin/Engine.html">Darwin::Engine</a></code> object is responsible for actually carrying out the GA and accepts the following parameters on initialization:</p>
<ul>
<li><code>config : Config(T)</code> - the Darwin config object.</li>
<li><code>evaluation : Evaluator(T)</code> - the evaluator object that will determine the fitness of an individual, which will in turn determine how likely it is to be selected for mating into the next generation.
*<code>crossover : CrossoverOperator(T)</code> - the crossover operator used to combine two individuals to generate another. By default this is an instance of <code><a href="Darwin/Crossover/PointCrossover.html">Darwin::Crossover::PointCrossover</a></code>. This class and its implementations are discussed in the <em>Crossover</em> section below.</li>
<li><code>mutation : MutationOperator(T)</code> - the mutation operator used to randomly alter an individual to generate genetic diversity in the population. By default this is an instance of <code><a href="Darwin/Mutation/SimpleMutator.html">Darwin::Mutation::SimpleMutator</a></code>. This class and its implementations are discussed in the <em>Mutation</em> section below.</li>
<li><code>selection : SelectionOperator(T)</code> - the selection operator used to select two individuals for mating after their fitness has been determined. By default this is an instance of <code><a href="Darwin/Selection/FitnessSelector.html">Darwin::Selection::FitnessSelector</a></code>. his class and its implementations are discussed in the <em>Selection</em> section below.</li>
<li><code>post : PostProcessor(T) | Nil</code> - a post processor that will be run after every generation.</li>
</ul>
<p>The main method of the <code>Engine</code> class is <code>run(generations : Int32 = 1)</code>, which will run the operators of selection, crossover, mutation and evaluation, in this order, generating another generation. You can run 1 generation by simple calling <code>engine.run</code> or run multiple generations as <code>engine.run(10)</code> or <code>engine.run(generations: 10)</code>, for example.</p>
<p>The fields that can be read from the <code>engine</code> object are:</p>
<ul>
<li><code>generation : Int32</code> - the generation number (starts at 1).</li>
<li><code>population: Array(Genome(T))</code> - the population, sorted from highest fitness to lowest. The <code>Genome</code> object contains:</li>
<li>
<ul>
<li><code>dna : Array(T)</code> - the gene array that defines the individual.</li>
</ul>
</li>
<li>
<ul>
<li><code>fitness : Float64</code> - the fitness value calculated for the individual by the <code>Evaluator</code>.</li>
</ul>
</li>
</ul>
<h3><a id="alphabet" class="anchor" href="#alphabet">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Alphabet</h3>
<p>An alphabet is a collection of possible genes that can constitute the genomes in the GA.</p>
<p>It is important to note that the type of the genes is generic in the base <code>Alphabet(T)</code> class, and the choice of type here will determine the type <code>T</code> in all other generic classes of this library. For example, if you are working with an <code>Alphabet(Int32)</code>, your crossover operators will be an implementation of <code>Crossover(Int32)</code>.</p>
<p>The alphabets provided by this lib are:</p>
<ul>
<li><code><a href="Darwin/Alphabet/IntAlphabet.html">Darwin::Alphabet::IntAlphabet</a></code> - an alphabet where any <code>Int32</code> can be a gene. Acceppts parameters <code>min</code> and <code>max</code> to control the range of integers allowed.</li>
<li><code><a href="Darwin/Alphabet/ArrayAlphabet.html">Darwin::Alphabet::ArrayAlphabet</a>(T)</code> -  has an array of objects of type <code>T</code> that act as a gene in the genome.</li>
<li><code><a href="Darwin/Alphabet/StringAlphabet.html">Darwin::Alphabet::StringAlphabet</a></code> - an easier way of making an <code>ArrayAlphabet(Char)</code> from a string. Initialized as `StringAlphabet.new(alphabet: &quot;abcd...&quot;).</li>
</ul>
<p>Examples:</p>
<pre><code class="language-crystal">i_alph <span class="o">=</span> <span class="t">Darwin</span><span class="t">::</span><span class="t">Alphabet</span><span class="t">::</span><span class="t">IntAlphabet</span>.new(min: <span class="n">0</span>, max: <span class="n">9</span>) <span class="c"># IntAlphabet &lt; Alphabet(Int32)</span>

a_alph <span class="o">=</span> <span class="t">Darwin</span><span class="t">::</span><span class="t">Alphabet</span><span class="t">::</span><span class="t">ArrayAlphabet</span>(<span class="t">String</span>).new(genes: [<span class="s">&quot;gene1&quot;</span>, <span class="s">&quot;gene2&quot;</span>, <span class="s">&quot;gene3&quot;</span>]) <span class="c"># ArrayAlphabet(String) &lt; Alphabet(String)</span>

s_alph <span class="o">=</span> <span class="t">Darwin</span><span class="t">::</span><span class="t">Alphabet</span><span class="t">::</span><span class="t">StringAlphabet</span>.new(alphabet: <span class="s">&quot;qwerty&quot;</span>) <span class="c"># StringAlphabet &lt; ArrayAlphabet(Char) &lt; Alphabet(Char)</span>


i_alph.random_gene <span class="c">#=&gt; ex: 5</span>
a_alph.random_gene <span class="c">#=&gt; ex: &quot;gene3&quot;</span>
s_alph.random_gene <span class="c">#=&gt; ex: &#39;w&#39;</span></code></pre>
<p>However, you may also implement your own <code>Alphabet</code> and pass it when instantiating the <code>config</code> file. You can do this by implementing:</p>
<pre><code class="language-crystal"><span class="k">abstract</span> <span class="k">class</span> <span class="t">Alphabet</span>(<span class="t">T</span>)
    <span class="k">abstract</span> <span class="k">def</span> <span class="m">random_gene</span>() : <span class="t">T</span>
<span class="k">end</span></code></pre>
<p>This <code>random_gene()</code> method is used by the <code>Engine</code> to instantiate the initial population, as well as by the mutator to alter genes in a genome.</p>
<h3><a id="selection" class="anchor" href="#selection">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Selection</h3>
<p>The selection operator is responsible for - given a population of individual genomes - selecting two genomes to be combined to produce a new genome for the next population.</p>
<p>The implementation of the selection operator provided by this lib is the <code><a href="Darwin/Selection/FitnessSelector.html">Darwin::Selection::FitnessSelector</a></code> class, which selects two individuals at random, weighted by the fitness of the individual in relation to the total fitness of the population. In this implementation an individual of fitness <code>2.0</code> will be twice as likely to be selected as an individual with a fitness of <code>1.0</code>.</p>
<p>However, you may also implement your own <code>Selector</code> and pass it when instantiating the <code>engine</code>.</p>
<p>A <code>Selector</code> has to implement:</p>
<pre><code class="language-crystal"><span class="k">abstract</span> <span class="k">class</span> <span class="t">SelectionOperator</span>(<span class="t">T</span>)
    <span class="k">abstract</span> <span class="k">def</span> <span class="m">select_mates</span>(genomes : <span class="t">Array</span>(<span class="t">Darwin</span><span class="t">::</span><span class="t">Genome</span>(<span class="t">T</span>))) : <span class="t">Tuple</span>(<span class="t">Darwin</span><span class="t">::</span><span class="t">Genome</span>(<span class="t">T</span>), <span class="t">Darwin</span><span class="t">::</span><span class="t">Genome</span>(<span class="t">T</span>))
<span class="k">end</span></code></pre>
<p>Please note that unlike the other operators, the selection operator receives the <code><a href="Darwin/Genome.html">Darwin::Genome</a></code> object (described in the <em>Engine</em> section above), so that it can have access to the fitness of the individuals, which is important for this operation.</p>
<h3><a id="crossover" class="anchor" href="#crossover">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Crossover</h3>
<p>The crossover operator is responsible for combining two parent genomes to generate a new genome that will be carried over the next population.</p>
<p>The implementations provided out of the box by this library are:</p>
<ul>
<li><code><a href="Darwin/Crossover/PointCrossover.html">Darwin::Crossover::PointCrossover</a></code> - selects a random point in the genome and copies everything before this point from one parent and everything after from the other (e.g. combining <code>AAAAA</code> and <code>BBBBB</code> may result in <code>AABBB</code>).</li>
<li><code><a href="Darwin/Crossover/UniformCrossover.html">Darwin::Crossover::UniformCrossover</a></code> - randomly selects each gene from either parent (e.g. combining <code>AAAAA</code> and <code>BBBBB</code> may result in <code>ABAAB</code>).</li>
</ul>
<p>If no crossover operator is passed to the <code>engine</code> object, it will use <code>PointCrossover</code>.</p>
<p>However, you may also implement your own <code>Crossover</code> by implementing:</p>
<pre><code class="language-crystal"><span class="k">abstract</span> <span class="k">class</span> <span class="t">CrossoverOperator</span>(<span class="t">T</span>)
    <span class="k">abstract</span> <span class="k">def</span> <span class="m">crossover</span>(genome1 : <span class="t">Array</span>(<span class="t">T</span>), genome2 : <span class="t">Array</span>(<span class="t">T</span>)) : <span class="t">Array</span>(<span class="t">T</span>)
<span class="k">end</span></code></pre>
<h3><a id="mutation" class="anchor" href="#mutation">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Mutation</h3>
<p>The mutation operator is responsible for randomly altering the genomes generated in the crossover step before adding them to the next generation. This is extremely important for the GA to add diversity to the population and making sure that it doesn't get stuck in a local maximum because a relevant gene doesn't exist in the population.</p>
<p>The implementation provided by this library is <code><a href="Darwin/Mutation/SimpleMutator.html">Darwin::Mutation::SimpleMutator</a></code>, which has a X% chance of mutating each gene for a random gene provided by the <code>Alphabet</code> used.</p>
<p>The default mutator in the engine object is a <code>SimpleMutator</code> with the alphabet provided in the <code>Config</code> object and a mutatin rate of <code>0.1</code> (10%). If you wish to change the mutation rate, simply instantiate another <code>SimpleMutator</code> when initializing the <code>Engine</code> object, as in:</p>
<pre><code class="language-crystal">mutator <span class="o">=</span> <span class="t">Darwin</span><span class="t">::</span><span class="t">Mutation</span><span class="t">::</span><span class="t">SimpleMutator</span>(alphabet: config.alphabet, probability: your_probability_here)
engine <span class="o">=</span> <span class="t">Darwin</span><span class="t">::</span><span class="t">Engine</span>.new(..., mutation: mutator)</code></pre>
<p>However, you may also implement your own <code>Mutator</code> by implementing:</p>
<pre><code class="language-crystal"><span class="k">abstract</span> <span class="k">class</span> <span class="t">MutationOperator</span>(<span class="t">T</span>)
    <span class="k">abstract</span> <span class="k">def</span> <span class="m">mutate</span>(genome : <span class="t">Array</span>(<span class="t">T</span>)) : <span class="t">Array</span>(<span class="t">T</span>)
<span class="k">end</span></code></pre>
<h2><a id="development" class="anchor" href="#development">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Development</h2>
<p>Different operator implementations should be added to their respective folders and namespaces. For example, a new <code>Mutator</code> should go inside the <code>src/darwin/mutation</code> folder and be declared inside the <code><a href="Darwin/Mutation.html">Darwin::Mutation</a></code> namespace.</p>
<p>As many things in the GA involve randomness, a mock of sorts of the <code>Random</code> class is provided in <code>spec/spec_helper.cr</code>, allowing us to define a sequence of results for the random methods:</p>
<pre><code class="language-crystal">  rng <span class="o">=</span> <span class="t">MockRandom</span>(random_ints: [<span class="n">3</span>, <span class="n">2</span>, <span class="n">0</span>])

  rng.rand(<span class="n">0</span>...<span class="n">10</span>) <span class="c">#=&gt; 3</span>
  rng.rand(<span class="n">0</span>...<span class="n">10</span>) <span class="c">#=&gt; 2</span>
  rng.rand(<span class="n">0</span>...<span class="n">10</span>) <span class="c">#=&gt; 0</span>
  rng.rand(<span class="n">0</span>...<span class="n">10</span>) <span class="c">#=&gt; IndexError</span></code></pre>
<p>Every class that has a random operation receives an optional <code>rng</code> parameter on initialization, which we can use to pass the <code>MockRandom</code> instance.</p>
<p>Also, every operator has a <code>Stub</code> class that will return static results passed to it, as well as recording the parameters of the calls it received. Example:</p>
<pre><code class="language-crystal">m <span class="o">=</span> <span class="t">Darwin</span><span class="t">::</span><span class="t">Mutation</span><span class="t">::</span><span class="t">StubMutator</span>(mutation_results: [[<span class="n">0</span>, <span class="n">0</span> ,<span class="n">0</span>], [<span class="n">1</span>, <span class="n">1</span>, <span class="n">1</span>], [<span class="n">2</span>, <span class="n">2</span>, <span class="n">2</span>]])

m.mutate([<span class="n">1</span>, <span class="n">2</span>, <span class="n">3</span>]) <span class="c">#=&gt; [0, 0, 0]</span>
m.mutate([<span class="n">4</span>, <span class="n">5</span>, <span class="n">6</span>]) <span class="c">#=&gt; [1, 1, 1]</span>

m.calls <span class="c">#=&gt; [[1, 2, 3], [4, 5, 6]]</span></code></pre>
<h2><a id="contributing" class="anchor" href="#contributing">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Contributing</h2>
<ol>
<li>Fork it (<a href="https://github.com/your-github-user/darwin/fork">https://github.com/your-github-user/darwin/fork</a>)</li>
<li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li>
<li>Commit your changes (<code>git commit -am 'Add some feature'</code>)</li>
<li>Push to the branch (<code>git push origin my-new-feature</code>)</li>
<li>Create a new Pull Request</li>
</ol>
<h2><a id="contributors" class="anchor" href="#contributors">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Contributors</h2>
<ul>
<li><a href="https://github.com/your-github-user">Fernando GouvÃªa</a> - creator and maintainer</li>
</ul>
</div>
</body>
</html>
